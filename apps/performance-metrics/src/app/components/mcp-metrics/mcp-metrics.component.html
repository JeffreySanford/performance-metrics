<div class="metrics-dashboard">
  <div class="metrics-grid">
    <mat-card class="metric-card">
      <mat-card-header>
        <mat-card-title>CPU Usage</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div #cpuChart class="chart"></div>
      </mat-card-content>
    </mat-card>

    <mat-card class="metric-card">
      <mat-card-header>
        <mat-card-title>Memory Usage</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div #memoryChart class="chart"></div>
      </mat-card-content>
    </mat-card>

    <mat-card class="metric-card">
      <mat-card-header>
        <mat-card-title>Token Usage</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div #tokenChart class="chart gauge-chart"></div>
      </mat-card-content>
    </mat-card>

    <mat-card class="metric-card">
      <mat-card-header>
        <mat-card-title>Request Statistics</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div #requestsChart class="chart"></div>
      </mat-card-content>
    </mat-card>
  </div>
</div>

<mat-card>
  <mat-card-header>
    <mat-card-title>MCP Workspace Standards Validator</mat-card-title>
    <mat-card-subtitle>Enter component code to validate against standards</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <mat-form-field appearance="fill" class="code-input-field">
      <mat-label>Component Code</mat-label>
      <textarea matInput 
                [formControl]="codeToValidate" 
                rows="10" 
                placeholder="Paste your component code here..."></textarea>
    </mat-form-field>

    <div *ngIf="isLoading" class="spinner-container">
      <mat-spinner diameter="30"></mat-spinner>
      <span>Validating...</span>
    </div>

    <div *ngIf="validationResult" class="results-container">
      <h3>Validation Results:</h3>
      <div *ngIf="validationResult.isValid; else violationsList">
        <mat-icon color="primary">check_circle</mat-icon> Code is valid.
      </div>
      <ng-template #violationsList>
        <mat-icon color="warn">error</mat-icon> Violations found:
        <mat-list>
          <mat-list-item *ngFor="let violation of validationResult.violations">
            {{ violation }}
          </mat-list-item>
        </mat-list>
      </ng-template>
    </div>

    <mat-divider></mat-divider>

    <h3>Live Updates:</h3>
    <mat-list dense class="updates-list">
      <mat-list-item *ngFor="let update of updates">
        <span class="update-timestamp">[{{ update.timestamp | date:'mediumTime' }}]</span> 
        <span class="update-type">Type: {{ update.type }}</span>
        <!-- Add more details based on update structure -->
      </mat-list-item>
       <mat-list-item *ngIf="updates.length === 0">
        No updates received yet.
       </mat-list-item>
    </mat-list>

  </mat-card-content>
  <mat-card-actions align="end">
    <button mat-raised-button color="primary" (click)="validateComponentCode()" [disabled]="!codeToValidate.value || isLoading">
      Validate Code
    </button>
  </mat-card-actions>
</mat-card> 